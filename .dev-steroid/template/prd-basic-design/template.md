# 基本設計書
> 本書は要件定義（FR/AC）からのトレースを前提とする。詳細設計に落とせる粒度で、ただし実装コードに依存しない抽象度を保つ。
> **全セクション必須**。該当しない場合は「該当なし」と記載し、セクション自体は削除しない。
## 0. サマリ
- 対象範囲：
- 前提：
- 主要な設計判断（Design decisions）：
## 1. 全体アーキテクチャ
### 1.1 システム構成（コンテキスト）
```text
(例)
User -> Client(UI) -> API -> DB
                 -> External Service
```
### 1.2 コンポーネント一覧
| コンポーネント | 役割 | 技術/責務 | 外部I/F | 備考 |
|---|---|---|---|---|
### 1.3 データフロー（要点）
- 主要データの流れ：
- 境界（信頼境界/権限境界）：
## 2. 要件とのトレース
| FR-ID | 画面ID / IF-ID / 機能 | 対応方針（基本設計） | 関連モジュール | 備考 |
|---|---|---|---|---|
## 3. 画面設計
### 3.1 画面一覧
| 画面ID | 画面名 | 目的 | 主な操作 | 遷移 | 備考 |
|---|---|---|---|---|---|
### 3.2 主要画面の入出力（サマリ）
- 入力項目（バリデーション方針の要点）：
- 出力項目：
## 4. API/IF 設計
> ここでは一覧と“要点”を示す（詳細なスキーマは詳細設計へ）。
### 4.1 API 一覧
| IF-ID | Method | Path | 認証/認可 | 概要 | 主なエラー | 備考 |
|---|---|---|---|---|---|---|
### 4.2 外部連携一覧
| IF-ID | 連携先 | プロトコル/形式 | データ | 失敗時の扱い | 備考 |
|---|---|---|---|---|---|
## 5. データ設計（要点）
- データの責務分離（どこに何を持つか）：
- 主要エンティティ：
- 参照：データ設計書へのリンク（作成後）
## 6. エラーハンドリング方針
- エラー分類（ユーザー起因/システム起因/外部起因）：
- 表示/通知方針：
- リトライ/フォールバック：
## 7. 非機能設計（要点）
- 性能（目標と設計上の工夫）：
- 可用性（冗長化/障害時運用）：
- 監視（メトリクス/ログ/アラート）：
- 設定/秘密情報（管理方針）：
## 8. セキュリティ（要点）
- 認証方式：
- 認可（ロール/権限）：
- 入力検証：
- レート制限/DoS対策：
- 監査ログ：
## 9. 未決・TODO
-
## 10. レビューステータス
- AIレビュー：未実施 / reviewed / 指摘あり
- ユーザー承認：未承認 / approved
- 備考：

<!-- generation_hints:
- **ファイル分割必須**: 本テンプレートはエントリポイント（index.md）として使用する。以下の単位でサブファイルに分割し、エントリポイントからリンクする:
  - 機能/ドメイン単位（例: `auth.md`, `recipe-management.md`, `search.md`）
  - 画面が多い場合は画面グループ単位（例: `screens-user.md`, `screens-admin.md`）
  - 外部連携が複雑な場合は連携先単位（例: `integration-payment.md`）
- エントリポイント（index.md）には「0. サマリ」「1. 全体アーキテクチャ」「2. 要件とのトレース」を残し、3〜8 は各サブファイルに移動する
- 各サブファイルの冒頭に「対象範囲」「関連 FR-ID」を明記し、単独で読んでも文脈がわかるようにする
- 要件（FR/AC）とのトレース表を必ず埋め、未対応/未決は明確に分離する
- 画面/IF がある場合、画面ID / IF-ID を採番し、一覧と本文の整合を取る
- API/IF 一覧は「認証/認可」「主要エラー」「責務境界」を必ず含め、詳細設計へ落とせる要点にする
-->
<!-- review_criteria:
- 要件（FR/AC）とのトレースが成立し、未対応/未決が明示されている
- アーキテクチャ/責務境界/API一覧が実装に落ちる要点を持ち、矛盾がない
- エラー方針/非機能（監視・運用）/セキュリティ要点が欠落していない
-->
